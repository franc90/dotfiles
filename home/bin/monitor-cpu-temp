#!/bin/bash

export $(egrep -z DBUS_SESSION_BUS_ADDRESS /proc/$(pgrep -u alex gnome-session)/environ)

readonly curr_temp=$(sensors | grep Core | awk '{print $3}' | cut -b 2-5 | tr -d '.' | sort -r | head -n 1)
readonly one_min_in_millis=60000
readonly max_temp=750

if [[ "$curr_temp" -gt "$max_temp" ]] ; then
  notify-send --urgency=critical --expire-time=$one_min_in_millis "BEWARE! Processor is getting hot (over 75.0Â°C)!!"
fi
