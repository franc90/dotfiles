#!/bin/bash

icon_prefix="/usr/share/icons/Numix/48/notifications/"
brightness_icon="${icon_prefix}notification-display-brightness-full.svg"

function send_notification() {
  backlight=$(xbacklight -get | bc)
  backlight=${backlight%.*}

  dunstify -a "changeBrightness" \
    -t 2000 \
    -u normal \
    -h string:x-canonical-private-synchronous:brightness "Brightness" \
    -i "$brightness_icon" \
    -h int:value:"$backlight"
}

case $1 in
  up)
    # Set the volume on (if it was muted)
    xbacklight -inc 5
    send_notification
    ;;
  down)
    # Set the volume on (if it was muted)
    xbacklight -dec 5
    send_notification
    ;;
esac
